let searchFunc=function(e,r,n){"use strict";new Request(e);let c=new XMLHttpRequest;c.open("GET",e),c.responseType="document",c.overrideMimeType("text/xml"),c.onload=function(){if(c.readyState===c.DONE&&200===c.status){let e=c.responseXML,t=[];e.querySelectorAll("entry").forEach(e=>{t.push({title:e.querySelector("title").innerHTML,content:e.querySelector("content").innerHTML,url:e.querySelector("url").innerHTML})});let l=document.getElementById(r);if(l){let e=document.getElementById(n);0<document.querySelectorAll("#local-search-input").length&&l.addEventListener("input",function(){let a='<ul class="search-result-list">',o=this.value;o=o.trim().toLowerCase().split(/[\s\-]+/),e.innerHTML="",this.value.trim().length<=0||(t.forEach(function(e){let l=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");let n=e.title.trim().toLowerCase(),r=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase();var t=e.url;let c,i=-1,s=-1;if(""!==r?o.forEach(function(e,t){c=n.indexOf(e),i=r.indexOf(e),c<0&&i<0?l=!1:(i<0&&(i=0),0==t&&(s=i))}):l=!1,l){a+="<li><a href='"+t+"' class='search-result-title'>"+n+"</a>";let r=e.content.trim().replace(/<[^>]+>/g,"");if(0<=s){let e=s-20,t=s+80;e<0&&(e=0),0==e&&(t=100),t>r.length&&(t=r.length);let l=r.substring(e,t);o.forEach(function(e){var t=new RegExp(e,"gi");l=l.replace(t,'<em class="search-keyword">'+e+"</em>")}),a+='<p class="search-result">'+l+"...</p>"}a+="</li>"}}),a+="</ul>",e.innerHTML=a)})}}},c.send()};searchFunc(CONFIG.local_search.path,"local-search-input","local-search-result");