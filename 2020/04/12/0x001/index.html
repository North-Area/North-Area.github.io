<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="North Area"><meta name="copyright" content="North Area"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>后端/运维技术笔记@2017~2020 | North Area</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link rel="icon" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"www.northarea.tech","root":"/","title":"朔方","version":"1.6.2","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="North Area" type="application/atom+xml"><script src="//at.alicdn.com/t/font_1847023_bauj9w7d7jk.js" async></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><meta name="description" content="Typecho被getshell之反思人的一生啊就是这么不可预料，一个人的命运，当然要靠自己奋斗，但是也要考虑历史的进程。所以对我来说这可能就是“历史的钦定”吧！当然这些都是后话了，关于最近Typecho爆出的两个漏洞，我不幸中枪。这其中主因在于自己，毕竟那台腾讯云一只在吃灰，日常也疏于维护，基本上是看都不看的状态，所以这次，关于这“历史的抉择”，我还是有必要好好记录一下！！ 0x00 背景 Ty">
<meta property="og:type" content="article">
<meta property="og:title" content="后端&#x2F;运维技术笔记@2017~2020">
<meta property="og:url" content="https://www.northarea.tech/2020/04/12/0x001/index.html">
<meta property="og:site_name" content="North Area">
<meta property="og:description" content="Typecho被getshell之反思人的一生啊就是这么不可预料，一个人的命运，当然要靠自己奋斗，但是也要考虑历史的进程。所以对我来说这可能就是“历史的钦定”吧！当然这些都是后话了，关于最近Typecho爆出的两个漏洞，我不幸中枪。这其中主因在于自己，毕竟那台腾讯云一只在吃灰，日常也疏于维护，基本上是看都不看的状态，所以这次，关于这“历史的抉择”，我还是有必要好好记录一下！！ 0x00 背景 Ty">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-04-12T04:10:46.000Z">
<meta property="article:modified_time" content="2020-05-25T13:40:33.555Z">
<meta property="article:author" content="North Area">
<meta property="article:tag" content="技术">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="North Area"><img width="96" loading="lazy" src="https://avatars0.githubusercontent.com/u/3104820?s=460&amp;v=4" alt="North Area"></a><div class="site-author-name"><a href="/about/">North Area</a></div><a class="site-name" href="/about/site.html">North Area</a><sub class="site-subtitle">Study at JAIST.</sub><div class="site-desciption">一个苦逼的日本留学生</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="我的主页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">22</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">3</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">8</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://note.northarea.tech" title="Wiki"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/North-Area" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:i@northarea.tech" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.weibo.com/5697878146" title="微博" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=96885760" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/26092673" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.pixiv.net/users/21362852" title="Pixiv" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-pixiv"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://note.northarea.tech/" title="Note" target="_blank" style="color:#696a6b"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-Dyanjing"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/1073512358" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/northarea" title="Telegram" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.instagram.com/hawksera" title="Instagram" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-instagram"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1215146790&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#e0dea4"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-men-line"></use></svg></a><a class="links-item hty-icon-button" href="/girls/" title="喜欢的女孩子" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Typecho%E8%A2%ABgetshell%E4%B9%8B%E5%8F%8D%E6%80%9D"><span class="toc-number">1.</span> <span class="toc-text">Typecho被getshell之反思</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E9%87%8D%E7%BD%AE%E4%B8%8Ehexo%E8%BF%81%E7%A7%BB"><span class="toc-number">2.</span> <span class="toc-text">系统重置与hexo迁移</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#TERMUX%E4%B8%8Assh%E3%80%81vim%E5%92%8C%E6%B8%97%E9%80%8F%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">TERMUX上ssh、vim和渗透环境配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux%E4%B8%8B%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">Linux下机器学习开发环境的配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B5%85%E8%B0%88%E6%9A%B4%E5%8A%9Bweb%E6%94%BB%E5%87%BB"><span class="toc-number">5.</span> <span class="toc-text">浅谈暴力web攻击</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0git%E4%BB%93%E5%BA%93"><span class="toc-number">6.</span> <span class="toc-text">搭建本地git仓库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#win10-%E6%9B%B4%E6%96%B0%E5%90%8EWIFI%E6%97%A0%E6%B3%95%E9%93%BE%E6%8E%A5%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">7.</span> <span class="toc-text">win10 更新后WIFI无法链接的解决办法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git%E6%97%A0%E6%B3%95%E9%83%A8%E7%BD%B2hexo%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">8.</span> <span class="toc-text">git无法部署hexo的解决办法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WIN10%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8%E8%BF%87%E9%AB%98%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">9.</span> <span class="toc-text">WIN10内存占用过高的解决办法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%99GITHUB-PAGES%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D"><span class="toc-number">10.</span> <span class="toc-text">给GITHUB PAGES绑定域名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EMKDocs%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BAWiki"><span class="toc-number">11.</span> <span class="toc-text">基于MKDocs建立个人Wiki</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mkdocs%E6%94%AF%E6%8C%81markdown%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F"><span class="toc-number">12.</span> <span class="toc-text">Mkdocs支持markdown数学公式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Zabbix-%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%90%AD%E5%BB%BA%E4%B8%8E%E5%BA%94%E7%94%A8%EF%BC%88%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD%EF%BC%89"><span class="toc-number">13.</span> <span class="toc-text">Zabbix 监控系统的搭建与应用（未完待续）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%88%B4%E5%B0%94%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%87%BA%E7%8E%B0-cpu0000-cpu2-internal-error-%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">14.</span> <span class="toc-text">戴尔服务器出现 cpu0000 cpu2 internal error 的解决办法</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://www.northarea.tech/2020/04/12/0x001/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="North Area"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="North Area"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">后端/运维技术笔记@2017~2020</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2020-04-12 12:10:46" itemprop="dateCreated datePublished" datetime="2020-04-12T12:10:46+08:00">2020-04-12</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="修改时间：2020-05-25 21:40:33" itemprop="dateModified" datetime="2020-05-25T21:40:33+08:00">2020-05-25</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" style="--text-color:#FB7299" itemprop="url" rel="index"><span itemprop="text">技术文档</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E6%8A%80%E6%9C%AF/" style="--text-color:#DD306A"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">技术</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h1 id="Typecho被getshell之反思"><a href="#Typecho被getshell之反思" class="headerlink" title="Typecho被getshell之反思"></a>Typecho被getshell之反思</h1><p>人的一生啊就是这么不可预料，一个人的命运，当然要靠自己奋斗，但是也要考虑历史的进程。所以对我来说这可能就是“历史的钦定”吧！当然这些都是后话了，关于最近Typecho爆出的两个漏洞，我不幸中枪。这其中主因在于自己，毕竟那台腾讯云一只在吃灰，日常也疏于维护，基本上是看都不看的状态，所以这次，关于这“历史的抉择”，我还是有必要好好记录一下！！</p>
<p><strong>0x00 背景</strong></p>
<p>Typecho是国内的一个经典、轻巧的开源博客系统。在10月底新版发布之前，已发布的正式版已经是很久没更新了，但就国内博客圈的使用率来说算是很有分量的一款程序，所以对此废话不多说。最近Typecho接连爆出2个严重漏洞！！使得很多站点受到影响，包括我也是<s>（服务器都被日成筛子了！）</s></p>
<p>由于这次漏洞影响比较大，网上出现了不少关于漏洞的分析，其中也有一些阴谋论的推测（后来被证实是想多了，个人认为该文章作者并不是恶意揣测开发团队的意图，仅仅是沟通问题）。</p>
<div class="tip">
①知道创宇漏洞分析文档：https://paper.seebug.org/424/
②核心开发者joyqi的回复：
   V2EX： https://www.v2ex.com/t/401202
   joyqi博客：https://joyqi.com/typecho/about-typecho-20171027.html
③某造成误解的文章：https://mp.weixin.qq.com/s/IE9g6OqfzAZVjtag-M_W6Q
</div>

<p><strong>0x01 发现与分析确认</strong></p>
<p>因为我日常也不怎么管理腾讯云主机，基本上就是吃灰状态，偶尔续续费什么的。直到某天我续费的时候提示说服务器被传木马了，在Typecho网站目录下多了一个zz.php。如此明显，初步分析是技术爱好者的“友情检测”，非勒索/恶意入侵。</p>
<p>于是，首先查看服务器的安全策略，我记得上一次设置这个好像在买这台主机时候做的，之后就没再管过。结果看了一眼：</p>
<ul>
<li>内心OS：妈耶！！开放全部端口访问！！这TM的不明摆着要被日吗？？？！！</li>
</ul>
<p>于是乎，马上删掉了安全策略，只留下开放22端口。随后，用winscp连接服务器，通过查询最后修改日期，发现网站根目录下有一个zz.php的一句话木马，而phpmyadmin目录下有一个cgi-149.php是被修改过。虽然数据库还在，但是很有可能已经被脱裤了，万幸的是我那个吃灰站点也没什么数据价值，对个人来说影响不大</p>
<p>不过接下来我担心的就是这个大马的提权程度，是否已经拿下Linux下的更高权限呢？？我从腾讯云的控制台查看操作记录，显示：没有！！这就说明一定是被删记录了！！用putty连接到主机，查看最后执行命令，发现2个令人可悲的记录：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="keyword">default</span>.pass</span><br><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>
<p>emmmm看来很有可能被脱裤了，因为在成功进行Linux提权之后一般是可以直接通过webshell来执行命令的，接下来要检查的是主机有没有异常登录：命令查看了以下日志：</p>
<ul>
<li>/var/log/message </li>
<li>/var/log/secure </li>
</ul>
<p>发现在最后修改日期之前的记录完全没有！！这说明是被清理痕迹了！！也解释了为什么腾讯云后台记录没有日志。由此可以判定：已经被提权，并且是较高权限，数据库被脱裤的可能性极大！！</p>
<p>但是即使这样也没办法确认入侵者到底有没有拿下服务器密码（比如新增一个用户并且给予root权限，这样所获得的权限等同于拿下root账户和密码）</p>
<p>但是通过命令</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">last -f /<span class="keyword">var</span>/log/wtmp</span><br></pre></td></tr></table></figure>
<p>发现之前没有异常登录！由于这个日志理论上是永久性记录的，所以可信度极高。又输入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/group</span><br></pre></td></tr></table></figure>
<p>发现也没有异常的用户/用户组，所以可以确定：对方只是成功提权，删了webshell之后他就没有权限了！而关于数据库的问题，反正没什么重要数据何况密码什么的都是程序自己生成的那些！所以并无太大影响！！</p>
<p><strong>0x02 处理</strong></p>
<p>这还能怎么处理？后话再说，这里就只做了应急处理！即：</p>
<ul>
<li>删除webshell</li>
<li>重新配置服务器端口的安全策略</li>
</ul>
<p>关于要不要开<strong>蜜罐</strong>这个问题，我觉得人家都那么明显的去提示你留下木马了，也仅仅是个友情检测，并非深仇大恨不至于开个蜜罐故意抓人。但这一次的经历是要当作教训的！！</p>
<p><strong>0x03 后话</strong></p>
<p>经历了这次被黑得最惨的“入侵”，基本上对动态网站无爱了，考虑到这台腾讯云主机的实际使用情况，计划直接重装然后拿来做测试和展示平台，也会搭建一些环境用于程序/漏洞测试，但为了在学校那边装个样子，应该会建个ghost站点作为展示站点。</p>
<p>关于这次经历，一方面感谢国内各大安全团队提供漏洞分析与解决建议，另一方面则是对Typecho开发团队及时提供解决方案表示感谢，毕竟这个圈子的维护，眼下也是越来越难了。</p>
<p>而对我自己来说，完全就像回到过去一样，这大概就是命运的“钦定”，让我回归一个纯粹的技术爱好者，涉足开发与运维，也要尝试一下CTF。</p>
<h1 id="系统重置与hexo迁移"><a href="#系统重置与hexo迁移" class="headerlink" title="系统重置与hexo迁移"></a>系统重置与hexo迁移</h1><p>因为win10坑爹的自动更新忘关了！所以在不知不觉当中它就给我更新了，然而每次系统盘更新都很恶心，日常eclipse因为JDK环境（安装在C盘）迷之缺失不能用还好说，毕竟我不是Java开发者，但是这次竟然让Node.js环境给和谐了！！所以我相当于数据完全丢失！！！本来想关机过几天再搞，却发现这个系统有问题不能关机！！或者说关不了机！！那就呵呵了，利用win10唯一一个比较人性化的设置——重置电脑来实现近似重装系统（效果上完全一样）</p>
<p>就这样，我翘了一节课，花了10小时时间成功重置电脑，并且又花了4小时去清理磁盘（200G的旧文件），让电脑变得“崭新”，就关了win10自动更新，依次去装那些常用软件，这些就不具体说了，下面讲一下重头戏：</p>
<p><strong>新电脑上hexo的迁移</strong></p>
<p>首先！！安装Node.js环境并且</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo</span><br></pre></td></tr></table></figure>
<p>这个过程可能会非常漫长，并且会“报错”：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm WARN deprecated swig@<span class="number">1.4</span><span class="number">.2</span>: This package is no longer maintained</span><br></pre></td></tr></table></figure>
<p>实际上是网速太慢，仍然在自动安装！等就行了！一定要等待！一定要等待！一定要等待！直到提示安装成功！！当然如果速度真的受不了，可以改npm源为淘宝源，具体怎么做这里就不具体说了。</p>
<p>下一步，Git bash 进入你存放hexo的目录，提前将备份好的这几个文件粘贴到里面！！注意仅仅要这几个！其他都！不！要！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> _config.yml</span><br><span class="line">package.json</span><br><span class="line">scaffolds/</span><br><span class="line">source/</span><br><span class="line">themes/</span><br></pre></td></tr></table></figure>
<p>之后</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>这里也只要等待！！接下来就可以按照之前使用hexo的方式来使用了，相当于迁移成功！！但是，这个时候部署，Git 会要求确认你的身份！这里按照GitHub上的信息来写就行了，命令如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="built_in">global</span> user.email  <span class="string">&quot;you@example.com&quot;</span></span><br><span class="line"></span><br><span class="line">git config --<span class="built_in">global</span> user.name <span class="string">&quot;Your Name&quot;</span></span><br></pre></td></tr></table></figure>
<p>之后</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<p>会弹出一个GitHub的登录窗口，登录即可！因为这时你并没有之前的残余文档，即public文件夹，所以直接部署即可。</p>
<p>之后，去验证一下是否部署成功，如果网站更新正常，即认为hexo迁移成功！！</p>
<p><strong>注意！！！如果再次出现node命令无法使用，重新配置系统环境变量即可！！</strong></p>
<p>最后再给出2个hexo插件：<a target="_blank" rel="noopener" href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>、<a target="_blank" rel="noopener" href="https://github.com/MoePlayer/hexo-tag-dplayer">hexo-tag-dplayer</a></p>
<h1 id="TERMUX上ssh、vim和渗透环境配置"><a href="#TERMUX上ssh、vim和渗透环境配置" class="headerlink" title="TERMUX上ssh、vim和渗透环境配置"></a>TERMUX上ssh、vim和渗透环境配置</h1><p>关于termux就不用多说了，安卓上少有的神器，对于运维党来说算是必备品！！但是要注意这玩意儿的安装目录就是系统根目录！！<strong>所以会有很严重的权限限制！！对于一些操作要谨慎！！不然就只能清除数据了！！</strong></p>
<ul>
<li>设备：Yoga Book</li>
</ul>
<p>每次启动建议先更新源，同时升级软件包</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt upgrade</span><br></pre></td></tr></table></figure>
<p>或直接</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt upgrade</span><br></pre></td></tr></table></figure>
<p>其他常用命令如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apt install &lt;package&gt;         安装软件包</span><br><span class="line">apt show  &lt;package&gt;           显示软件包的信息</span><br><span class="line">apt list [--installed]        列出所有（或已安装）的软件包信息</span><br><span class="line">apt remove &lt;package&gt;          删除软件包</span><br><span class="line">chmod                         修改文件权限</span><br><span class="line">chown                         修改文件归属</span><br></pre></td></tr></table></figure>
<p>为了一次性直接装了所有要安装的包，如安装package1~3这3个包，可以用这个命令，就是并列之后加-y：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; -y</span><br></pre></td></tr></table></figure>
<p>由于是Linux模拟终端，完全按Linux的套路来就行，国内网慢可以改用清华的源，大部分使用方法在termux官网上都有教程（英文），所以具体的这里就不多说了。演示日常装逼，使用cmatrix命令（前提是你装好了这个命令）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install cmatrix</span><br></pre></td></tr></table></figure>
<p>同样的，装逼还有一个命令sl，怎么安装和运行完全同上。至于美化可以用zsh，但是我这个平板就比较方便，不需要这个了。感兴趣可以具体参考zsh的wiki</p>
<p><strong>配置ssh</strong></p>
<p>为什么要配置ssh？因为yoga book作为我的主力平板（实际上是嫌15.6的Acer太重了），在日常当中一直充当超级本（即使它是Android系统，但是超薄超轻真的方便太多！！）用于技术演示和应急维护，作为运维的一员，自然不必说ssh的重要性，配置ssh所实现的功能有2个：</p>
<ul>
<li>使用yoga book上的termux连接到服务器终端</li>
<li>使用其他终端连接到termux终端</li>
</ul>
<p>先说第一个，以阿里云/腾讯云为例，可以在官网的控制台查看外网ip，当然我绑定域名之后直接ping一下域名更方便</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c <span class="number">1</span> https:<span class="comment">//liefeng.github.io </span></span><br></pre></td></tr></table></figure>
<p>这样获取返回的外网ip，可以使用termux通过ssh连接主机终端。首先，termux安装sshd</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install sshd</span><br></pre></td></tr></table></figure>
<p>之后像使用putty一样连接主机终端就可以了，如以root账户连接ip为127.0.0.1的主机终端：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sshd <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> -lroot</span><br></pre></td></tr></table></figure>
<p>这样的好处是对于我这种只能带着安卓平板（yoga book）到处跑的人来说，随时可以连接到主机进行配置/维护，同时也意味着远程连接着一台真·Linux主机，在某些时候能弥补Android平台限制的技术问题。</p>
<p>关于第二个，实际上对我来说没啥用。为了方便其他终端也能管理termux终端（实际上是因为安卓手机编程太蛋疼了！），在安装openssh之后使用JuiceSSH连接termux终端，电脑端可以用xshell连接（可以本地连接本地，毕竟Android手机用这个很麻烦，当然我yoga book自带灵光键盘不存在这个问题哦！），之后使用JuiceSSH提取密钥，毕竟termux不支持账户密码验证！！当然连接时注意端口！termux的ssh端口默认是8022，当然可以先自己查看一下！<br>安装openssh：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install openssh</span><br></pre></td></tr></table></figure>
<p>查看sshd服务端口：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ntlp |grep sshd</span><br></pre></td></tr></table></figure>
<p>当然openssh也是支持通过ssh连接其他终端的，语法为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh 用户名@主机地址</span><br></pre></td></tr></table></figure>
<p><strong>配置vim</strong><br>关于这里就完全是Linux配置vim的套路了，所以我真的不想写些什么了，毕竟用Google搜索任一“Linux+vim配置”的文章都比我写得好，写得全面！何况相对于vim本身，配置开发环境更为重要！毕竟vim配置的目的还是作为IDE来用。这里，说一下termux上所集成的语言包和其他必要包：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">python         默认安装的是Python3</span><br><span class="line">python2        这个才是python2<span class="number">.7</span></span><br><span class="line">clang          大名鼎鼎的c++ 编译器</span><br><span class="line">vim            这个就不用多少了，termux自带的是vi</span><br><span class="line">git            这个码农都懂的</span><br><span class="line">htop           任务管理器</span><br><span class="line">tree           目录树</span><br><span class="line">make           这个很重要，如果安装第三方包的话</span><br><span class="line">irssi          irc客户端,命令行聊天软件</span><br><span class="line">wget           更不用说了</span><br><span class="line">openssl        ssh，这个之前说过了</span><br><span class="line">tar            想必这个也不用多说</span><br></pre></td></tr></table></figure>
<p>总之，有什么需要的直接输入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt list</span><br></pre></td></tr></table></figure>
<p>就可以了，对着列表安装自己所需要的。回到VIM配置的问题，如果你需要配置vim，只需在Home目录创建一个~/.vimrc文件即可以配置vim了，然而termux的vim自带该文件，就是配置写入有点问题（实际上还是权限问题！何况我是x86！！）所以既然对我来说足够用，那么就不多说了，具体建议参考这篇文章：<br><a target="_blank" rel="noopener" href="https://github.com/yangyangwithgnu/use_vim_as_ide">https://github.com/yangyangwithgnu/use_vim_as_ide</a></p>
<p><strong>配置渗透环境</strong></p>
<p>这里为了图方便，直接把所有基础包直接安装，大小约122MB。如果你的termux是第一次使用，可以直接复制我的安装命令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install git wget vim nano tar less nmap openssh hydra python2 -y</span><br></pre></td></tr></table></figure>
<p>nmap，openssh，hydra算是环境的一部分，具体怎么用问Google。之后就是安装其他的环境包：BBScan，subDomainsBrute，RouterSploit，whatportis和sqlmap,具体怎么用依然问Google，总之安装玩就算环境搭建成功，用法问Google！！！<br>安装sqlmap,BBScan，subDomainsBrute和RouterSploit；提示缺失python扩展包，直接用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip2 install &lt;对应扩展包&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/sqlmapproject/sqlmap.git</span></span><br><span class="line">git clone https:<span class="comment">//github.com/lijiejie/BBScan.git</span></span><br><span class="line">git clone https:<span class="comment">//github.com/y1ng1996/lijiejie_subDomainsBrute.git</span></span><br><span class="line">git clone https:<span class="comment">//github.com/reverse-shell/routersploit</span></span><br><span class="line">pip2 install requests</span><br></pre></td></tr></table></figure>
<p>再安装whatportis</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip2 install whatportis</span><br></pre></td></tr></table></figure>
<p>这样一个基础的渗透环境就配置好了，起码比N年前那种所谓Android渗透包（基本上都要root才能用）要好！！至于用法有不会的就Google！！有不会的就Google！有不会的就Google！重要的事情说三遍！！总之熟能生巧！！！</p>
<h1 id="Linux下机器学习开发环境的配置"><a href="#Linux下机器学习开发环境的配置" class="headerlink" title="Linux下机器学习开发环境的配置"></a>Linux下机器学习开发环境的配置</h1><p>关于这个环境，我是准备拿来做计算的，毕竟搞工业仿真，如果一直在本机上测试那么我电脑直接捐了算了！！何况让服务器一直吃灰成何体统！！<s>毕竟是已经续费到毕业的！不得不用！！</s></p>
<ul>
<li>设备：阿里云ECS</li>
<li>执行终端：YogaBook（基于termux模拟终端）、Windows10</li>
</ul>
<p>首先去下载Anaconda2，因为我的ECS是在青岛机房，而众所周知的一些原因，从官网上下载会导致速度特别特别慢，这个时候推荐从清华大学的镜像源下载。由于使用python2.7，就下载对应的Anaconda2-5.0.1。</p>
<p>如果你不确定选择什么版本，可以先查看一下系统信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure>
<p>我选择Anaconda2-5.0.1-Linux-x86_64.sh。并且创建一个Anaconda目录用于存放下载和安装，当然你也可以下载到根目录。</p>
<p>cd 到Anaconda目录，执行下载，不得不说国内的源下载速度是非常快的！！35mb/s</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda2-5.0.1-Linux-x86_64.sh</span></span><br></pre></td></tr></table></figure>
<p>下载好之后执行安装，整个过程就是按几下Enter,输入几次yes。如果你的命令行卡在下载命令上了，记得先退出再安装！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash Anaconda2-<span class="number">5.0</span><span class="number">.1</span>-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>
<p>安装完之后记得添加环境变量！实际上安装过程中会自己问，可以选择yes</p>
<p>之后就是检测一下能不能用，输入python看是否能返回python。但是输入conda、jupyter一类的却返回command not found，解决方法是把anaconda2/bin这个目录添加到环境变量就好了(具体操作看安装目录，默认安装目录是在~下)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">&#x27;export PATH=&quot;~/anaconda2/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>更新path以立即生效</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>这时再输入那些命令就可以执行了！因为深度学习环境需要一些开源模块，尤其是依托于Scikit-Learn，这时候就需要自己手动去安装了，可以使用pip或者conda。当然Numpy ,Scipy ,Matplotlib这些包也是必须的！！剩下的包就随用随加。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">conda install scipy</span><br><span class="line">conda install theano</span><br><span class="line">conda install keras</span><br><span class="line">pip install tensorflow</span><br><span class="line">pip install sklearn</span><br><span class="line">pip install numpy</span><br><span class="line">pip install matplotlib</span><br></pre></td></tr></table></figure>
<p>但是还有一个问题是Anaconda官网因为众所周知的原因国内访问慢的要死，这个时候还是改用国内的源更方便一些！！</p>
<p>添加Anaconda的TUNA镜像</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span></span><br></pre></td></tr></table></figure>
<p>设置搜索时显示通道地址</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda config --set show_channel_urls yes</span><br></pre></td></tr></table></figure>
<p>这个时候可以考虑配置jupyter了，首先要测试一下环境</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure>
<p>环境没问题就先来配置ipython，输入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipython profile create</span><br></pre></td></tr></table></figure>
<p>然后</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~<span class="regexp">/.ipython/</span>profile_default/</span><br></pre></td></tr></table></figure>
<p>对生成的2个文件进行编辑，使用方法是先键入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c = get_config()</span><br></pre></td></tr></table></figure>
<p>再查找到c.InteractiveShellApp.exec_lines语句，在[]里键入常用的模块，我以自己的为例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;import pandas as pd&quot;</span>,<span class="string">&quot;import numpy as np&quot;</span>,<span class="string">&quot;import scipy.stats as spstats&quot;</span>, <span class="string">&quot;import scipy as sp&quot;</span></span><br></pre></td></tr></table></figure>
<p>因为过多的导入会影响ipython的开启速度，这里就自己斟酌吧。</p>
<p>接下来，为了能够远程访问我这台ECS上的jupyter notebook，要进行最恶心的设置了。首先，为了保证能够完美设置，确认写入path环境之后重启ECS，之后，输入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --generate-config</span><br></pre></td></tr></table></figure>
<p>而root会报错，要求加入-allow-root再执行，所以</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --generate-config --allow-config</span><br></pre></td></tr></table></figure>
<p>执行成功会显示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Writing <span class="keyword">default</span> config to: <span class="regexp">/root/</span>.jupyter/jupyter_notebook_config.py</span><br></pre></td></tr></table></figure>
<p>反之报错，重复上述步骤直至成功，一般重启服务器即可。既然生成了配置文件，接下来设置个密码，为了方便起见建议用ipython手动设置！！即先输入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipython</span><br></pre></td></tr></table></figure>
<p>进入ipython，然后配置自己的密码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">from</span> notebook.auth <span class="keyword">import</span> passwd</span><br><span class="line">In [<span class="number">2</span>]: passwd()</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br></pre></td></tr></table></figure>
<p>回车，之后会返回一串密文，即Out[2]:那个。这个时候配置jupyter_notebook_config.py</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim jupyter_notebook_config.py</span><br></pre></td></tr></table></figure>
<p>找到,去掉注释#，然后按自己情况编辑</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.ip=<span class="string">&#x27;*&#x27;</span></span><br><span class="line">c.NotebookApp.password = u<span class="string">&#x27;sha:ce...刚才复制的那个密文&#x27;</span></span><br><span class="line">c.NotebookApp.open_browser = False</span><br><span class="line">c.NotebookApp.port =<span class="number">8888</span> #可自行指定一个端口, 访问时使用该端口</span><br></pre></td></tr></table></figure>
<p>因为这个文件大概600+行代码，建议用:?keyword 来查找。之后在非隐藏目录，启动jupyter notebook</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook </span><br></pre></td></tr></table></figure>
<p>若是root用户，则执行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --allow-root</span><br></pre></td></tr></table></figure>
<p>然后ip:端口号即可使用jupyter，实际上域名：端口号也可以。记得在安全组的公网入方向添加这个端口</p>
<p><strong>但是这样又爆出了一个严峻问题，就是我是用root用户的，而jupyter是整个服务器的目录都能读取并且按照操作用户的权限来执行，所以一旦密码被破解我的服务器就会被日！！！因此要考虑一下安全问题：</strong></p>
<ul>
<li>不到用的时候不要开启jupyter</li>
<li>设置超级复杂的密码</li>
<li>第三方安全软件监视端口</li>
</ul>
<h1 id="浅谈暴力web攻击"><a href="#浅谈暴力web攻击" class="headerlink" title="浅谈暴力web攻击"></a>浅谈暴力web攻击</h1><p>关于这个傻逼问题还是和阿里云有关。因为web应用防火墙，后台总是会看到一些“奇奇怪怪”的攻击记录，其中最多的就是脚本木马、上传漏洞类型的暴力攻击。</p>
<ul>
<li>首先看一下我的服务器安全组配置：公网出全部端口，公网入21/22/80/443端口</li>
<li>其次，统计一下请求方式：POST、PUT、GET</li>
<li>没有发现有CSRF攻击的记录</li>
</ul>
<p>从上面的信息可以看出端口限制基本上是死的，对于80端口入侵，可行性最高的就是跑GCI，使用比较无脑的GCI扫描器进行穷举。对于21/22端口入侵，FTP就算了，我服务器上FTP服务是死的。而22端口，除非拿下我的账户密码直接ssh，否则入侵成功的几率是不存在的！443就算了。</p>
<p>那么从HTTP协议来看，实际的安全性如何：</p>
<ul>
<li>GET (选择)：从服务器上获取一个具体的资源或者一个资源列表。</li>
<li>POST （创建）： 在服务器上创建一个新的资源。</li>
<li>PUT （更新）：以整体的方式更新服务器上的一个资源。</li>
</ul>
<p>关于具体的就不说了，实际应用当中都是一些嗅探手段，用于垃圾扫描。<strong>毕竟当下做SQL注入也是特别难的。</strong>从日志里看，这类请求无非是检测是否存在某目录文件。但是这一引出了一个大的问题——<strong>漏洞利用</strong>。HTTP协议，win10下可以使用telnet命令（在系统中手动开启这个命令才能用）。更具体的说明详见<a target="_blank" rel="noopener" href="https://klionsec.github.io/2017/06/18/http-basic/">从入侵者的眼中去理解 http 协议</a></p>
<p>如上所述，从注入角度看基本上是攻不进来的，但是一旦自身内部有问题，存在漏洞就不好说了。关于漏洞影响这里不多说，而且给出的建议也很简单却很难做好：</p>
<ul>
<li>合理配置服务/端口与权限</li>
<li>关注安全信息，及时更新软件，打补丁</li>
<li>使用第三方高效的服务器安全软件</li>
</ul>
<h1 id="搭建本地git仓库"><a href="#搭建本地git仓库" class="headerlink" title="搭建本地git仓库"></a>搭建本地git仓库</h1><p>centos搭git仓库很别扭，而且….虽然是为了技术验证，但讲道理这个不如QQ群的群共享好用（如果是短期项目的话）</p>
<ul>
<li>设备：阿里云ECS（吃灰中）</li>
</ul>
<p>首先通过yum源下载安装git</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y git</span><br></pre></td></tr></table></figure>
<p>安装之后会在/home/目录下生成一个git目录，但相关操作之后再说。首先添加个用户（这里用户名为git），并且为之设置密码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adduser git</span><br><span class="line">passwd git</span><br></pre></td></tr></table></figure>
<p>下一步，我们在/home/git/目录下建立一个子目录，作为git仓库目录。因为是给美赛准备的，我这里就是mcm</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/git/mcm</span><br></pre></td></tr></table></figure>
<p>接下来给予用户组和775权限：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chown git:git /home/git/mcm</span><br><span class="line">sudo chmod <span class="number">755</span> /home/git/mcm</span><br></pre></td></tr></table></figure>
<p>到这一步，基本上就配置完了，接下来切换到git用户组，在mcm目录下创建仓库即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su git</span><br><span class="line">cd /home/git/mcm</span><br></pre></td></tr></table></figure>
<p>这里我建立一个仓库名为mcm的仓库</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init --bare mcm.git</span><br></pre></td></tr></table></figure>
<p>至此，git仓库搭建与配置结束（结束了？？是我懒得搞那些没用的权限设置，尤其是我习惯用shell！！何况用ssh来使用对我的队友极其不方便！！），马上打开git bash验证一下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@ECS的ip:<span class="regexp">/home/gi</span>t/mcm/mcm.git</span><br></pre></td></tr></table></figure>
<p>输入yes之后，返回</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">warning: You appear to have cloned an empty repository.</span><br></pre></td></tr></table></figure>
<p>到这里一切都ok了，虽然感觉使用起来然并卵。关于上传项目参考git上传仓库（感觉这样给队友用只会给她们增加压力XD）。当然，如果你是作大型的自建仓库使用，建议用<strong>Gogs或者GITLAB</strong>，当然我这里自用就用不着这么上纲上线的程序了。</p>
<h1 id="win10-更新后WIFI无法链接的解决办法"><a href="#win10-更新后WIFI无法链接的解决办法" class="headerlink" title="win10 更新后WIFI无法链接的解决办法"></a>win10 更新后WIFI无法链接的解决办法</h1><p>一般来说都说win10强制更新导致的，首先先手动关闭自动更新（虽然然并卵）：</p>
<ul>
<li>win+R，输入services.msc，找到Windows Update，手动关闭。</li>
</ul>
<p>之后，打开控制面板，网络和Internet-查看网络状态和任务-更改适配器设置-WLAN-右键，属性-Microsoft网络客户端-配置-驱动程序-更新驱动程序-浏览计算机以查找驱动软件-从计算机的设备驱动程序列表中选取-Qualcomm Atheros AR9485 无线网络适配器-下一步</p>
<p>以上，解决问题。</p>
<h1 id="git无法部署hexo的解决办法"><a href="#git无法部署hexo的解决办法" class="headerlink" title="git无法部署hexo的解决办法"></a>git无法部署hexo的解决办法</h1><p>最近部署hexo会报错</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: HttpRequestException encountered.</span><br></pre></td></tr></table></figure>
<p>提示连接不到GitHub，Google了一下，据说是因为Github最近停用了TLS 1.0和v 1.1导致的，但是呢感觉是慢性发作….</p>
<p>解决方法也很简单，把_comfig.yml中的repo由</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//github.com/examplename/examplename.github.io.git</span></span><br></pre></td></tr></table></figure>
<p>改为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git@github.com:examplename/examplename.github.io.git</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>之后重新部署即可！！</p>
<h1 id="WIN10内存占用过高的解决办法"><a href="#WIN10内存占用过高的解决办法" class="headerlink" title="WIN10内存占用过高的解决办法"></a>WIN10内存占用过高的解决办法</h1><p>首先对于WIN10真的是没法吐槽，系统原因导致很吃机械硬盘，再加上本来电脑配置就差，所以硬盘经常卡我也能接受，虽然配置差，但是内存经常占用过高我就实在是不能忍了，大概折腾了一下，可以这样解决：</p>
<p>先放电脑配置：</p>
<ul>
<li><p>硬盘：西数 1T 机械硬盘，5400转</p>
</li>
<li><p>内存：4GB DDR3，什么牌子的不知道</p>
</li>
<li><p>CPU： i5-4210m，2.6GHZ</p>
</li>
</ul>
<p>4GB的内存的确是寒酸了点，看任务管理器，主要是chrome占用比较高，网页运载大。<strong>所以把默认浏览器改换edge之后好了很多，内存占用大概是chrome的2/3</strong></p>
<p>其次，考虑内存不足就去设置虚拟内存，在虚拟内存设置页面，<strong>对非系统盘都设置为无分页文件，仅对系统盘设置自定义大小，初始值和最大值都设置为推荐值</strong>。设置好之后重新启动。内存占用的确就能降下来了，之前大概剩余300MB左右，优化之后剩余稳定在1GB左右。</p>
<p>当然最好的方法还是加内存条，但是对于这台配置很烂的机器就算啦。等毕业了买matebook13还不是美滋滋！</p>
<h1 id="给GITHUB-PAGES绑定域名"><a href="#给GITHUB-PAGES绑定域名" class="headerlink" title="给GITHUB PAGES绑定域名"></a>给GITHUB PAGES绑定域名</h1><p>阿里云（万网）的ink域名很便宜，我就注册了一个….</p>
<p>ping一下自己的github仓库地址，然后将IP做A、CNAME解析，并在github上补充自己的域名，在仓库目录下增加只含新域名的CNAME文件即可。</p>
<p>又回归独立域名了！！！</p>
<h1 id="基于MKDocs建立个人Wiki"><a href="#基于MKDocs建立个人Wiki" class="headerlink" title="基于MKDocs建立个人Wiki"></a>基于MKDocs建立个人Wiki</h1><p>实际上这个东西是从冉酱那里发现的，然后我思考了一下现实需求，就决定也弄一个。</p>
<p>可以满足的需求如下：</p>
<ul>
<li><p>可以作为博客替代品，语言为英文（提供姿势水平）。</p>
</li>
<li><p>仅用来写学习笔记，科目是数学、物理学、材料科学、计算机科学，语言为英文。</p>
</li>
<li><p>如同作业一样强制自己做学习笔记，有利于留学生活的高效性。</p>
</li>
</ul>
<p>因此，这个基于Python并可以部署到GitHub pages的Wiki程序还是很适合留学生用的，缺点是三栏式主题只有一个。</p>
<p><strong>搭建</strong></p>
<p>MKDocs的官方教程写得很详细，可以从官网上看：<a target="_blank" rel="noopener" href="https://www.mkdocs.org/">https://www.mkdocs.org</a></p>
<p>它支持多个版本的python，仅仅使用pip模块来安装即可。所以在CMD（建议管理员权限打开）下检查一下已安装的版本和pip，就能执行安装了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python --version</span><br><span class="line"></span><br><span class="line">pip --version</span><br></pre></td></tr></table></figure>
<p>注意这里只要显示有较新版本pip即可，除非安装失败否则不要按照官网教程更新pip！！容易误删！！我的python版本是python3.7，pip版本是pip19.2.1。所以直接开始安装，并查看版本。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install mkdocs</span><br><span class="line"></span><br><span class="line">mkdocs --version</span><br></pre></td></tr></table></figure>
<p>安装成功，显示mkdocs版本为1.0.4，匹配python3.7。注意安装目录是python安装目录下\lib\site-packages\mkdocs，所以写文章之前，要先在你想要的目录下创建项目，以方便后期备份！！我习惯放到D盘里了，名字就是my-project。因此</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">D:</span><br><span class="line">cd D:\</span><br><span class="line">mkdocs <span class="keyword">new</span> my-project</span><br><span class="line">cd my-project</span><br></pre></td></tr></table></figure>
<p>之后安装material主题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mkdocs-material</span><br></pre></td></tr></table></figure>
<p>然后在配置yml文件之前，先考虑一下如何建立这个可以web访问的网站？它可以放到GitHub Pages上，这意味着可以绑定域名并且开启https。而一个github账户只能开一个个人Github Pages，下属无数个项目GitHub Pages，所以首先要建立项目GitHub Pages。这里我参考了：<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000003946969">https://segmentfault.com/a/1190000003946969</a></p>
<p>实际操作没文章里说的那么难，无非是：</p>
<ul>
<li><p>随意建立一个repo，名字随意，在setting里直接拉到GitHub Pages，Source选择master branch，Custom domain设置为自己的二级域名（当然你可以绑其他域名，无所谓一二级）。勾选Enforce HTTPS从而强制开启https。这个时候会自动生成一个CNAME文件，里面是二级域名，不带https的那种！！如wiki.chnliefeng.ink。</p>
</li>
<li><p>打开域名服务商，如阿里云，在域名解析里开启二级域名，是CNAME记录。我的设置是CNAME主机记录为wiki，记录值为liefeng.github.io。然后解析，过一会儿即可访问 <a target="_blank" rel="noopener" href="https://wiki.chnliefeng.ink/">https://wiki.chnliefeng.ink</a></p>
</li>
</ul>
<p>然后这个时候参考官方指南来配置mkdocs.yml。注意pages要用nav描述。</p>
<p><strong>部署</strong></p>
<p>先git clone那个repo，记得更改branch为gh-pages，然后把my-project里面所有东西放到repo目录下，之后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdocs gh-deploy</span><br></pre></td></tr></table></figure>
<p>这样就部署好了</p>
<h1 id="Mkdocs支持markdown数学公式"><a href="#Mkdocs支持markdown数学公式" class="headerlink" title="Mkdocs支持markdown数学公式"></a>Mkdocs支持markdown数学公式</h1><p>最近要用来写物理/数学的学习笔记，就研究了一下。实际上这个设置非常简单。安装pymdown-extensions然后配置mkdoc.yml文件即可，</p>
<p>首先安装插件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pymdown-extensions</span><br></pre></td></tr></table></figure>
<p>然后在mkdocs的根目录下的docs文件夹中新建一个mathjax-config.js文件，该文件是辅助配置MathJax，里面代码为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* mathjax-loader.js  file */</span></span><br><span class="line"><span class="comment">/* ref: http://facelessuser.github.io/pymdown-extensions/extensions/arithmatex/ */</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">win, doc</span>) </span>&#123;</span><br><span class="line">  win.MathJax = &#123;</span><br><span class="line">    <span class="attr">config</span>: [<span class="string">&quot;MMLorHTML.js&quot;</span>],</span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&quot;tex2jax.js&quot;</span>],</span><br><span class="line">    <span class="attr">jax</span>: [<span class="string">&quot;input/TeX&quot;</span>],</span><br><span class="line">    <span class="attr">tex2jax</span>: &#123;</span><br><span class="line">      <span class="attr">inlineMath</span>: [ [<span class="string">&quot;\\(&quot;</span>,<span class="string">&quot;\\)&quot;</span>] ],</span><br><span class="line">      <span class="attr">displayMath</span>: [ [<span class="string">&quot;\\[&quot;</span>,<span class="string">&quot;\\]&quot;</span>] ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">TeX</span>: &#123;</span><br><span class="line">      <span class="attr">TagSide</span>: <span class="string">&quot;right&quot;</span>,</span><br><span class="line">      <span class="attr">TagIndent</span>: <span class="string">&quot;.8em&quot;</span>,</span><br><span class="line">      <span class="attr">MultLineWidth</span>: <span class="string">&quot;85%&quot;</span>,</span><br><span class="line">      <span class="attr">equationNumbers</span>: &#123;</span><br><span class="line">        <span class="attr">autoNumber</span>: <span class="string">&quot;AMS&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">unicode</span>: &#123;</span><br><span class="line">        <span class="attr">fonts</span>: <span class="string">&quot;STIXGeneral,&#x27;Arial Unicode MS&#x27;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">displayAlign</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">showProcessingMessages</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">messageStyle</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(<span class="built_in">window</span>, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>
<p>之后在mkdocs.yml文件中添加以下代码即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">markdown_extensions:</span><br><span class="line">  - pymdownx.arithmatex</span><br><span class="line">  - pymdownx.betterem:</span><br><span class="line">      smart_enable: all</span><br><span class="line">  - pymdownx.caret</span><br><span class="line">  - pymdownx.critic</span><br><span class="line">  - pymdownx.details</span><br><span class="line">  - pymdownx.emoji:</span><br><span class="line">      emoji_generator: !!python/name:pymdownx.emoji.to_svg</span><br><span class="line">  - pymdownx.inlinehilite</span><br><span class="line">  - pymdownx.magiclink</span><br><span class="line">  - pymdownx.mark</span><br><span class="line">  - pymdownx.smartsymbols</span><br><span class="line">  - pymdownx.superfences</span><br><span class="line">  - pymdownx.tasklist:</span><br><span class="line">      custom_checkbox: <span class="literal">true</span></span><br><span class="line">  - pymdownx.tilde</span><br><span class="line"><span class="attr">extra_javascript</span>:</span><br><span class="line">  - mathjax-config.js</span><br><span class="line">  - https:<span class="comment">//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML</span></span><br></pre></td></tr></table></figure>
<p>之后部署带有markdown数学公式的文档，查看网页效果即可。</p>
<h1 id="Zabbix-监控系统的搭建与应用（未完待续）"><a href="#Zabbix-监控系统的搭建与应用（未完待续）" class="headerlink" title="Zabbix 监控系统的搭建与应用（未完待续）"></a>Zabbix 监控系统的搭建与应用（未完待续）</h1><p>这是来自乌海市某物联网科技公司的需要，也是我的的第一单。</p>
<p>使用资源：</p>
<ul>
<li>JAIST Cloud Service 提供Centos7桌面环境</li>
<li>Zabbix </li>
<li>自己组装的电脑主机，装Centos7，作为Zabbix的总服务器端</li>
<li>计算机网络集群，windows7，200台构成</li>
</ul>
<p>由于这个公司某无法无天的技术员利用公司计算机集群挖矿，对公司造成重大经济损失，而他掌握公司技术命脉，且所有技术设置都是黑箱操作，因此我们建立zabbix系统的目的是：</p>
<ul>
<li>实现对计算机集群的实时检测，以确定运行情况，打破黑箱操作的现状。</li>
<li>在监控之后，使用teamviewer进行远程维护，同时进行逆向技术破解计算机集群设置，实现技术夺权。</li>
</ul>
<p><strong>Zabbix简述</strong></p>
<p>Zabbix是开源软件，是一个企业级分布式开源监控解决方案。其官网有中文版说明书。对Zabbix的概述中，官方说明中有这样2个需要注意的描述：</p>
<ul>
<li><p>Zabbix server 是 Zabbix软件的核心组件，agent 向其报告可用性、系统完整性信息和统计信息。server也是存储所有配置信息、统计信息和操作信息的核心存储库。</p>
</li>
<li><p>Zabbix proxy 可以代替 Zabbix server采集性能和可用性数据。Zabbix proxy在Zabbix的部署是可选部分；但是proxy的部署可以很好的分担单个Zabbix server的负载。</p>
</li>
<li><p>Zabbix agents 部署在被监控目标上，用于主动监控本地资源和应用程序，并将收集的数据发送给 Zabbix server。</p>
</li>
</ul>
<p>所以，如果我们想构建一个Zabbix监控网络，假设要监控M台主机构成的网络，可以使用1台设备作为server端，其他主机节点作为agents，但是会很吃server的计算性能，导致单个server终端负载过大。如果在这个网络中的主机节点分为N个组，每组配置一台proxy，之后总的sever只要采集每一组当中那台proxy的数据，并进行整理即可实现对整个主机网络的监控。这里很明显M远大于N，从硬件的运行性能上看，对于大型网络集群配置并使用proxy是很有必要的。</p>
<p>针对这一点，官方说明中有提到：</p>
<ul>
<li>另外，回过头来整体的了解下 Zabbix 内部的数据流对Zabbix的使用也很重要。首先，为了创建一个采集数据的监控项，您就必须先创建主机。其次，在任务的另外一端，必须要有监控项才能创建触发器（trigger），必须要有触发器来创建动作（action）。因此，如果您想要收到类似“X个server上CPU负载过高”这样的告警，您必须首先为 Server X 创建一个主机条目，其次创建一个用于监控其 CPU的监控项，最后创建一个触发器，用来触发 CPU负载过高这个动作，并将其发送到您的邮箱里。虽然这些步骤看起来很繁琐，但是使用模板的话，实际操作非常简单。也正是由于这种设计，使得 Zabbix 的配置变得更加灵活易用。</li>
</ul>
<p>举个例子：网路由A，B，C3个地区的计算机集群组成，不同集群当中主机数量不同，施工技术方案与质量不同，网络运营质量不同，因此如果单个server同时监控A,B,C3个地区的计算机集群，其负载可能过大导致运行可靠性不稳定。而如果A,B,C3个地区各配置一台proxy，这样server的实际负载只有3个proxy，而单个proxy的负载也仅为该地区的计算机集群。这种网络体系对后期的增改很有利，且更具稳定性。</p>
<p><strong>Zabbix的安装与部署</strong></p>
<p>我从学校获得了一个Centos的云主机，但是没有root权限，不过只能用有限的资源来做技术验证了，具体信息如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用主机：JAIST Could</span><br><span class="line">系统：Centos 7.6.1810</span><br><span class="line">用户权限：普通用户，无root权限</span><br><span class="line">系统默认的仓库：ftp.jaist.ac.jp</span><br></pre></td></tr></table></figure>
<p>首先要搭建LAMP环境，安装包一类的在JAIST仓库里有很多，所以不用愁资源的问题，网上也有很多LAMP环境的搭建教程。而普通用户没有root权限，这就意味着不能使用yum命令来配置/安装服务，但是wget命令来搭建和配置简直灾难。所以我的解决办法是使用yumdownloader命令，但是在此之前要先检查仓库里有没有所需的服务包，命令格式如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list <span class="string">&#x27;安装包（rpm包）名称*&#x27;</span></span><br></pre></td></tr></table></figure>
<p>如果显示有，则可以直接下载安装rpm包</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yumdownloader rpm包</span><br></pre></td></tr></table></figure>
<p>解压rpm包</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm2cpio rpm包 |cpio -idvm</span><br></pre></td></tr></table></figure>
<p>添加PATH，如果在HOME目录下，可以如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim  ~/.bashrc</span><br><span class="line"><span class="keyword">export</span> PATH=$PATH:$HOME/usr/bin/</span><br></pre></td></tr></table></figure>
<p>重新登录 或者 source 一下.bashrc文件即可使用这个程序。</p>
<p>后来由于JAIST Could 是分出来的目录权限，不是云主机也不是VPS那种类型，而是类似N年前流行的那种虚拟空间。给学生的账号也没有root权限，能用的服务也很少。但是学校的docker我还没测试，因此就直接转战虚拟机了。</p>
<p><strong>CentOS的安装与配置</strong></p>
<p>总结一下步骤：</p>
<ul>
<li>系统的版本选择与USB系统盘的制作</li>
<li>系统安装与网络及其他设置</li>
</ul>
<p>关于Centos要注意一下它的版本问题，针对不同版本的Linux主要以下2个命令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure>
<p>这里要说明一下Centos的发行版本之间的区别(机翻自readme文档)：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">List <span class="keyword">of</span> images <span class="keyword">in</span> <span class="built_in">this</span> directory</span><br><span class="line">================================</span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-DVD-<span class="number">1804.</span>iso</span><br><span class="line">This DVD image contains all the packages that can be installed using the</span><br><span class="line">installer. This is the recommended image <span class="keyword">for</span> most users.</span><br><span class="line"></span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-NetInstall-<span class="number">1804.</span>iso</span><br><span class="line">This is the network install and rescue image. The installer will ask <span class="keyword">from</span></span><br><span class="line">where it should fetch the packages to be installed. This image is most</span><br><span class="line">useful <span class="keyword">if</span> you have a local mirror <span class="keyword">of</span> CentOS packages.</span><br><span class="line"></span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-Everything-<span class="number">1804.</span>iso</span><br><span class="line">This image contains the complete set <span class="keyword">of</span> packages <span class="keyword">for</span> CentOS Linux <span class="number">7.</span> It can be</span><br><span class="line">used <span class="keyword">for</span> installing or populating a local mirror. This image needs a 16GB USB</span><br><span class="line">flash drive <span class="keyword">as</span> it is too large <span class="keyword">for</span> DVD isos.</span><br><span class="line"></span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-LiveGNOME-<span class="number">1804.</span>iso</span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-LiveKDE-<span class="number">1804.</span>iso</span><br><span class="line">These images are Live images <span class="keyword">of</span> CentOS Linux <span class="number">7.</span> Depending on the name they use the respective display manager. They are designed <span class="keyword">for</span> testing purposes and exploring the CentOS Linux <span class="number">7</span> environment. They will not modify the content <span class="keyword">of</span> your hard disk, unless you choose to install CentOS Linux <span class="number">7</span> <span class="keyword">from</span> within the Live environment. Please be advised that you can not change the set <span class="keyword">of</span> installed packages <span class="keyword">in</span> <span class="built_in">this</span> <span class="keyword">case</span>. This needs to be done within the installed system using <span class="string">&#x27;yum&#x27;</span>.</span><br><span class="line"></span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-Minimal-<span class="number">1804.</span>iso</span><br><span class="line">The aim <span class="keyword">of</span> <span class="built_in">this</span> image is to install a very basic CentOS Linux <span class="number">7</span> system, <span class="keyword">with</span> the minimum <span class="keyword">of</span> packages needed to have a functional system. Please burn <span class="built_in">this</span> image onto a CD and boot your computer off it. A preselected set <span class="keyword">of</span> packages will be installed on your system. Everything <span class="keyword">else</span> needs to be installed using yum. The set <span class="keyword">of</span> packages installed by <span class="built_in">this</span> image is identical to the one installed when choosing the group named <span class="string">&quot;Minimal&quot;</span> <span class="keyword">from</span> the full DVD image.</span><br><span class="line"></span><br><span class="line">Using the installation images</span><br><span class="line">=============================</span><br><span class="line"></span><br><span class="line">You can burn these images to a DVD or <span class="string">&#x27;dd&#x27;</span> them to a USB flash drive.</span><br><span class="line">After the boot media has been prepared, boot the computer off the boot media. If you <span class="keyword">do</span> an install to your hard disk using these installation images, please remember to run <span class="string">&quot;yum update&quot;</span> after the installation to update your system to the latest packages.</span><br><span class="line"></span><br><span class="line">Remember that <span class="keyword">in</span> order to be able to partition your disk you will need to run</span><br><span class="line">the GUI installer which <span class="keyword">in</span> turns needs enough RAM. The same is <span class="literal">true</span> <span class="keyword">for</span> the</span><br><span class="line">network setup step. Please refer to the release notes available at</span><br><span class="line"><span class="attr">http</span>:<span class="comment">//wiki.centos.org/Manuals/ReleaseNotes/CentOS7 for more details about</span></span><br><span class="line">these aspects.</span><br><span class="line"></span><br><span class="line">机翻如下：</span><br><span class="line"></span><br><span class="line">此目录中的图像列表</span><br><span class="line">================================</span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-DVD-<span class="number">1804.</span>iso</span><br><span class="line">该DVD映像包含可以使用以下命令安装的所有软件包。</span><br><span class="line">安装程序。这是大多数用户的推荐图像。</span><br><span class="line"></span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-NetInstall-<span class="number">1804.</span>iso</span><br><span class="line">这是网络安装和救援映像。安装程序将询问</span><br><span class="line">应该在哪里获取要安装的软件包。此图片是最</span><br><span class="line">如果您具有CentOS软件包的本地镜像，则很有用。</span><br><span class="line"></span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-Everything-<span class="number">1804.</span>iso</span><br><span class="line">此映像包含用于CentOS Linux <span class="number">7</span>的完整软件包集。</span><br><span class="line">用于安装或填充本地镜像。此图片需要16GB USB</span><br><span class="line">闪存驱动器，因为它对于DVD isos而言太大。</span><br><span class="line"></span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-LiveGNOME-<span class="number">1804.</span>iso</span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-LiveKDE-<span class="number">1804.</span>iso</span><br><span class="line">这些图像是CentOS Linux <span class="number">7</span>的实时图像。根据名称，它们使用各自的显示管理器。它们被设计用于测试目的和探索CentOS Linux <span class="number">7</span>环境。除非您选择从Live环境中安装CentOS Linux <span class="number">7</span>，否则它们不会修改硬盘的内容。请注意，在这种情况下，您不能更改已安装软件包的集合。这需要在安装的系统中使用<span class="string">&#x27;yum&#x27;</span>完成。</span><br><span class="line"></span><br><span class="line">CentOS-<span class="number">7</span>-x86_64-Minimal-<span class="number">1804.</span>iso</span><br><span class="line">此映像的目的是安装一个非常基本的CentOS Linux <span class="number">7</span>系统，并使用具有功能性系统所需的最少软件包。请将此映像刻录到CD上，然后从计算机启动计算机。将安装一组预选的软件包。需要使用yum安装所有其他软件包。该映像安装的软件包集与从完整DVD映像中选择名为“最小”的组时安装的软件包相同。</span><br><span class="line"></span><br><span class="line">使用安装映像</span><br><span class="line">=============================</span><br><span class="line"></span><br><span class="line">您可以将这些图像刻录到DVD或“ dd”到USB闪存驱动器。</span><br><span class="line">准备好启动媒体后，从启动媒体启动计算机。如果使用这些安装映像安装到硬盘，请记住在安装后运行“ yum update”以将系统更新为最新的软件包。</span><br><span class="line"></span><br><span class="line">请记住，为了能够对磁盘进行分区，您需要运行</span><br><span class="line">GUI安装程序，而该安装程序又会频繁提供足够的RAM。对于</span><br><span class="line">网络设置步骤。请参阅发布说明，网址为：</span><br><span class="line"><span class="attr">http</span>:<span class="comment">//wiki.centos.org/Manuals/ReleaseNotes/CentOS7了解有关的更多详细信息</span></span><br><span class="line">这些方面</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>未完待续….</p>
<h1 id="戴尔服务器出现-cpu0000-cpu2-internal-error-的解决办法"><a href="#戴尔服务器出现-cpu0000-cpu2-internal-error-的解决办法" class="headerlink" title="戴尔服务器出现 cpu0000 cpu2 internal error 的解决办法"></a>戴尔服务器出现 cpu0000 cpu2 internal error 的解决办法</h1><p>研究室有一台二手的DELL PowerEdge T620，源自江东林课题组，不过目前被我改来做计算设备，具体配置如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Workstation:</span><br><span class="line"></span><br><span class="line">DELL PowerEdge T620</span><br><span class="line">System: Windows 10 Pro,64-bit operating system</span><br><span class="line">CPU: Inter Xeon E5-2697 v2@2.70GHz(48CPUs), x64-based processor</span><br><span class="line">RAM: 32GB (DDR3)</span><br><span class="line">ROM: 300GB</span><br><span class="line">GPU: GTX1660 Super, P106-90</span><br></pre></td></tr></table></figure>
<p>由于是双路CPU，并且这个电脑有段时间没使用了，虽然调试结果看是能够基本正常使用，但总是出现系统错误导致win10强制重启。根据这里（<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/fec7a1e5487f905190b4e7ee.html%EF%BC%89%EF%BC%8C%E4%BB%8E%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%AB%98%E7%BA%A7%E9%80%89%E9%A1%B9%E5%8D%A1%E8%AE%BE%E7%BD%AE%E9%87%8C%E5%8F%96%E6%B6%88%E4%BA%86%E7%B3%BB%E7%BB%9F%E5%A4%B1%E8%B4%A5%E6%97%B6%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF%E7%9A%84%E8%AE%BE%E5%AE%9A%E3%80%82%E4%BD%86%E6%98%AF%E4%B8%8D%E4%B9%85%E5%B0%B1%E5%BC%80%E5%A7%8B%E9%97%AA%E9%BB%84%E7%81%AF%E4%BA%86%EF%BC%8C%E6%8F%90%E7%A4%BA%E7%A1%AC%E4%BB%B6%E8%AE%BE%E7%BD%AE%E6%9C%89%E9%97%AE%E9%A2%98%E3%80%82%E6%A0%B9%E6%8D%AE%E9%9D%A2%E6%9D%BF%E6%98%BE%E7%A4%BA%E6%98%AFcpu0000">https://jingyan.baidu.com/article/fec7a1e5487f905190b4e7ee.html），从系统的高级选项卡设置里取消了系统失败时自动重启的设定。但是不久就开始闪黄灯了，提示硬件设置有问题。根据面板显示是cpu0000</a> cpu2 internal error (IERR) contact support。本来就是用来跑计算的，也不止一次因为设备不稳定导致运行中断而损失惨重，因此就先暂停任务，解决这个硬件设置问题。</p>
<p>我参考这里（<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/572fddcd9450%EF%BC%89%E6%9D%A5%E8%BF%9B%E8%A1%8C%E8%A7%A3%E5%86%B3%E3%80%82">https://www.jianshu.com/p/572fddcd9450）来进行解决。</a></p>
<p>这个错误是因为开启了CPU节能设置，需要在BIOS中关闭该设置即可恢复。解决方法是：</p>
<p>①服务器按住电源键15秒后到关机状态，并拔掉电源,再按住电源30秒放一下静电，然后静待1分钟；</p>
<p>②接通电源，会自动开机；不行的话就手动开机。</p>
<p>③开机后再dell图标出来的时候按下F2还是F11来着,进入BIOS设置；（我的系统提示是F11，但一般应该是F2）。</p>
<p>④system Setup - System BIOS ，选择 system profile Settings，进入后将右边的 Performance Per Watt（DAPC）改为 Custom；然后将 CIE 和 C States 选项改成 Disabled。</p>
<p>⑤保存设置并重启设备</p>
<p>至此，错误解决。重启之后设备再没闪黄灯，也没有出现莫名其妙的设备中断事故。果然很久没使用的老设备都要先好好调试才行….</p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="http://liefenghexo.oss-cn-beijing.aliyuncs.com/others/Alipay.jpg"><img loading="lazy" src="http://liefenghexo.oss-cn-beijing.aliyuncs.com/others/Alipay.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="http://liefenghexo.oss-cn-beijing.aliyuncs.com/others/QQpay.png"><img loading="lazy" src="http://liefenghexo.oss-cn-beijing.aliyuncs.com/others/QQpay.png" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="http://liefenghexo.oss-cn-beijing.aliyuncs.com/others/Wepay.png"><img loading="lazy" src="http://liefenghexo.oss-cn-beijing.aliyuncs.com/others/Wepay.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>North Area</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://www.northarea.tech/2020/04/12/0x001/" title="后端/运维技术笔记@2017~2020">https://www.northarea.tech/2020/04/12/0x001/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2020/09/02/5/" rel="prev" title="修士一年级の手账"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">修士一年级の手账</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2020/02/28/0x002/" rel="next" title="乱七八糟的科研搬砖随笔（已停更）"><span class="post-nav-text">乱七八糟的科研搬砖随笔（已停更）</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>本站启用GitHub Issues作为评论系统。</span><br><span>所以如果是重要的评论，建议跳转 GitHub Issues 发表。</span><br><span>若没有本文 Issue，您可以使用 Comment 模版新建。</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/North Area/north-area.github.io/issues?q=is:issue+后端/运维技术笔记@2017~2020">GitHub Issues</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2016 – 2023 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> North Area</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.4.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.6.2</span></div><div class="live_time"><span>本博客已抽象地运行</span><span id="display_live_time"></span><span class="moe-text">👊👴👊</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2016-07-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div></body></html>